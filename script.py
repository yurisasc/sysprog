from azure.storage.blob import BlockBlobService
from azure.storage.blob import ContentSettings
from picamera import PiCamera
import cognitive_face as CF
import requests
from io import BytesIO
from PIL import Image, ImageDraw

COGNITIVE_KEY = 'd58695a9ad2f4ac999b21d346be60a75'
BASE_URL = 'https://southeastasia.api.cognitive.microsoft.com/face/v1.0/'
BLOB_NAME = 'piblobsysprog'
BLOB_KEY = '4QPW8SgtgLohZCI8edjPMShh4czDRZvMIPJ/3NPNigxy7VQ82PEK0szFS0CfLxVAPAzEsEwdMjLDCKDX2pywbg=='
CONTAINER_NAME = 'webcamupload'
IMAGE_NAME = 'test.jpg'

# Converrt width height to a point in a rectangle
def getRectangle(faceDictionary):
    rect = faceDictionary['faceRectangle']
    left = rect['left']
    top = rect['top']
    bottom = left + rect['height']
    right = top + rect['width']
    return ((left, top), (bottom, right))

# Capture using raspi camera
camera = PiCamera()
camera.capture('image1.jpg')
print('Captured image.')

# Upload photo to azure blob container
block_blob_service = BlockBlobService(account_name=BLOB_NAME, account_key=BLOB_KEY)

block_blob_service.create_blob_from_path(
    'webcamupload',
    IMAGE_NAME,
    'image1.jpg',
    content_settings=ContentSettings(content_type='image/jpeg'))
print('Uploaded image.')

# Prepare cognitive service
CF.Key.set(COGNITIVE_KEY)
CF.BaseUrl.set(BASE_URL)

img_url = 'https://piblobsysprog.blob.core.windows.net/webcamupload/test.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'
##img_url = 'https://www.how-old.net/Images/faces2/main001.jpg'

faces = CF.face.detect(img_url)

print('There are ' + str(len(faces)) + ' person in the room.')

# Download the image from the url
response = requests.get(img_url)
img = Image.open(BytesIO(response.content))

# For each face returned, use the face rectangle and draw a red box
draw = ImageDraw.Draw(img)
for face in faces:
    draw.rectangle(getRectangle(face), outline='red')

# Display the image
img.show()
